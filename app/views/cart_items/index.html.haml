%h1 Listing Cart Items
- total_price = 0
- @cart_items.each { |cart_item| total_price += cart_item.item.price }
%h4
  Total Price : #{total_price}
%ul.nav.nav-pills
  %li.active
    = link_to "Show Cart", '' if user_signed_in? and current_user.has_role? :user and can? :create, CartItem
  %li
    = link_to "Add more items", items_path if user_signed_in? and current_user.has_role? :user and can? :create, CartItem
  %li
    = link_to "Checkout Cart", checkout_path if user_signed_in? and current_user.has_role? :user and can? :create, CartItem
  %li
    = link_to "Previous Orders", previous_orders_path if user_signed_in? and current_user.has_role? :user and can? :create, CartItem
%table.table.table-bordered.table-hover
  %tr
    %th Item Number
    %th Name
    %th Price
    %th
  - @cart_items.each do |cart_item|
    %tr
      %td= cart_item.item_id
      %td= cart_item.item.try(:name)
      %td= cart_item.item.try(:price)
      %td= link_to 'Delete', cart_item_path(cart_item) , method: :delete